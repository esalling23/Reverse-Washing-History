<script type="text/javascript">

$(document).ready(function () {

	$('.btn-submit#signup').click(function(evt) {
		// var pkg = getFormData($(this));
		// console.log(evt, "evt");
		var data = {};
		/*data.contentCategories = $(".form :input.active").map(function(){
														    return $(this).val();
														 }).get();*/
		data.username = $('#username').val();
		data.password = $('#password').val();
		data.email = $('#email').val();

		console.log(data);

		if (!data.password || !data.username || !data.email) {
			console.log ("signup error");
			  
			} else {
				

				$.post("/api/create/",data, function(data){
					// console.log(data);
					console.log("signup success");
            
          });
			}

	});

	$('.btn-submit#login').click(function(evt) {
		// var pkg = getFormData($(this));
		// console.log(evt, "evt");
		var data = {};
		// var email = false;

		data.username = $('#username').val();
		data.password = $('#password').val();
		// data.email = $('#email').val();

		console.log(data);

		if (!data.password || !data.username) {
			console.log ("login error");
			  
			} else {
				console.log("login success");

				$.get("/api/find/", data, function(data){
					// console.log (data, "data set");
					 $('#app-content').html(data);
          });
			}

	});

	//Get form data - JR

	function getFormData(submitElement) {

			var pkg;

			if(submitElement[0].dataset === undefined)
				return undefined;
			
			try {
				pkg = JSON.parse(submitElement[0].dataset.package);
			}
			catch(e) {
				pkg = submitElement[0].dataset.package;
			}

			if($.isPlainObject(pkg)) {
				$.each(Object.keys(pkg), function( key, value ) {

					if(pkg[value] !== undefined)
					  pkg[value] = $(pkg[value].toString()).val();

				});
			}
			else if(!submitElement.is('button'))
				pkg = $(pkg).val();

			return pkg;

		};

		//player login - JR

		// function playerLogin(data) {

		// 				// Save current game code to local storage
		// 				sessionStorage.setItem('active', true);

		// 				// Open socket connection
		// 				if(socket === undefined) {
		// 			    socket = io('//{{host}}');
		// 			    registerEvents();
		// 			  }

		// 				playerName = $('#player_name').val();
		// 				sessionStorage.setItem('username', playerName);

		// 				socket.on('disconnect', function(){
		// 				   // alert('disconnected!')
		// 				});

		// 				console.log('Connecting to game "' + gameCode + '".');

		//         // Log player in
		// 				socket.emit('login:submit', emitData({username: playerName, uid: data.uid}));

		// 			}

		//GooGle Maps

      // var map;
      // var initMap = function() {
      // 	console.log("initializing map..")
      //   map = new google.maps.Map(document.getElementById('map'), {
      //     center: {lat: -34.397, lng: 150.644},
      //     zoom: 2
      //   });
      //   console.log(map);
      // };


      var map;

		 $('#map-tab').click(function (e) {
				console.log(e);
		  	// initMap();
		  	console.log("initialized");
		  	google.maps.event.trigger(map, 'resize');
				map.setZoom( map.getZoom() );
		});
});


</script>